-- select sysdate()



CREATE TABLE T2_PRODUCT
(PROD_ID INT PRIMARY KEY,
PROD_NAME VARCHAR(20) NOT NULL,
PRICE FLOAT,
COST FLOAT,
LAUNCH_DATE DATE)
    



desc T2_PRODUCT

INSERT INTO T2_PRODUCT VALUES(105, 'SATISH', 5678, 78, '1995-08-20')
SELECT * FROM T2_PRODUCT


CREATE TABLE MANUFACTURERS
(M_CODE INT PRIMARY KEY,
M_NAME VARCHAR(15));

CREATE TABLE PRODUCT
(P_ID INT PRIMARY KEY,
P_NAME VARCHAR(15),
P_PRICE INT,
M_CODE INT);
 
DROP TABLE MANUFACTURERS
ALTER TABLE PRODUCT
ADD CONSTRAINT FK_MCODE
FOREIGN KEY(M_CODE) REFERENCES MANUFACTURERS(M_CODE)

INSERT INTO MANUFACTURERS VALUES(100,'TATA');
INSERT INTO MANUFACTURERS VALUES(101,'BAJAJ');
INSERT INTO MANUFACTURERS VALUES(102,'SAMSUNG');

INSERT INTO PRODUCT VALUES(1, 'NANO', 155000, 100 );
INSERT INTO PRODUCT VALUES(2, 'INDICA', 750000, 100 );
INSERT INTO PRODUCT VALUES(3, 'BAJAJ AUTO', 29000, 101 );
INSERT INTO PRODUCT VALUES(4, 'PULSAR', 78000, 101 );
INSERT INTO PRODUCT VALUES(5, 'T TRUCK', 4500000 , 100 );
INSERT INTO PRODUCT VALUES(6, 'E PULSAR', 100000, 101 );
INSERT INTO PRODUCT VALUES(7, 'SUMO', 1200000, 100 );
INSERT INTO PRODUCT VALUES(8, 'PULSAR++', 155000, 101 );

SELECT * FROM MANUFACTURERS;

SELECT * FROM PRODUCT;

SELECT P_PRICE 
FROM PRODUCT 
WHERE P_NAME = 'SUMO';

SELECT  P_NAME FROM PRODUCT 
WHERE P_PRICE > 200000;


SELECT  P_NAME FROM PRODUCT
WHERE P_PRICE> (SELECT P_PRICE FROM PRODUCT WHERE P_NAME = 'INDICA');

SELECT  P_NAME FROM PRODUCT WHERE P_PRICE >100000 AND (P_NAME LIKE 'N%' OR P_NAME LIKE 'P%');

SELECT  P_NAME FROM PRODUCT 
WHERE P_PRICE BETWEEN 100000 AND 300000;

SELECT  P_NAME FROM PRODUCT
WHERE (P_NAME LIKE '%B' OR P_NAME LIKE 'P%') AND P_PRICE BETWEEN 30000 AND 90000;

CREATE TABLE DOCTOR
(DOC_ID INT PRIMARY KEY,
DOC_NAME VARCHAR(20),
SPECIALIZATION VARCHAR(20),
PHONE VARCHAR(15),
EMAILID VARCHAR(25));

CREATE TABLE PATIENT
(PAT_ID INT PRIMARY KEY,
PAT_NAME VARCHAR(20),
PAT_DOB DATE,
PAT_CITY VARCHAR(15),
PAT_STATE VARCHAR(10));

CREATE TABLE APPOINTMENT
(APP_ID INT PRIMARY KEY,
APP_DATE DATE,
PAT_ID INT,
DOC_ID INT,
TIME1 TIME,
REASON VARCHAR(20));

ALTER TABLE APPOINTMENT
ADD CONSTRAINT FK_PAT_ID
FOREIGN KEY(PAT_ID) REFERENCES PATIENT(PAT_ID);

ALTER TABLE APPOINTMENT
ADD CONSTRAINT FK_DOC_ID
FOREIGN KEY(DOC_ID) REFERENCES DOCTOR(DOC_ID);

INSERT INTO DOCTOR VALUES(100,"UMA", "ORTHO", '1234567892', "NOT MENTIONED");
INSERT INTO DOCTOR VALUES(101, 'KUMAR', 'PHYSICIAN', '7893452341', "KUMAR@gmail.com");
INSERT INTO DOCTOR VALUES(102, 'RAMESH', 'ORTHO', '4567892341', "NOT MENTIONED");

INSERT INTO PATIENT VALUES(1, 'NARAYAN', '1994-08-12', 'BANGLORE', 'KA');
INSERT INTO PATIENT VALUES(2, 'HARISH', '1993-07-12','BANGLORE', 'KA');
INSERT INTO PATIENT VALUES(3, 'ARJUN', '1992-01-10', 'CHENNAI', 'KA');
INSERT INTO PATIENT VALUES(4, 'SURAJ', '1990-09-12', 'MYSORE', 'KA');
INSERT INTO PATIENT VALUES(5, 'NATESH', '1990-10-12', 'BANGLORE', 'KA');

INSERT INTO APPOINTMENT VALUES(50, '2021-08-24', 1, 100, '10.00 ', 'LEQ PAIN');
INSERT INTO APPOINTMENT VALUES(51, '2021-08-24', 3, 101, '10.15 ', 'FEVER');
INSERT INTO APPOINTMENT VALUES(52, '2021-08-25', 1, 100, '11.00 ', 'FOLLOW UP');
INSERT INTO APPOINTMENT VALUES(53, '2021-08-26', 2, 101, '12.00 ', 'FEVER');
INSERT INTO APPOINTMENT VALUES(54, '2021-08-21', 3, 100, '11.00 ', 'BACK PAIN');
INSERT INTO APPOINTMENT VALUES(55, '2021-08-26', 1, 100, '10.15 ', 'FOLLOW UP');



SELECT PAT_NAME 
FROM PATIENT
WHERE PAT_CITY = 'CHENNAI' AND YEAR(PAT_DOB) = 1992 

SELECT PAT_NAME
FROM PATIENT
WHERE (PAT_STATE = 'KA' AND (PAT_NAME LIKE "%N"));

SELECT PAT_NAME
FROM PATIENT
WHERE PAT_STATE = 'KA' AND 
PAT_DOB < (SELECT PAT_DOB FROM PATIENT  WHERE PAT_NAME = 'SURAJ' AND PAT_CITY = 'MYSORE' );

SELECT * FROM Patient 
where pat_state = (SELECT Pat_state from Patient whre pat_name = 'Arjun');


SELECT * FROM DOCTOR
WHERE  SPECIALIZATION = (SELECT SPECIALIZATION FROM DOCTOR WHERE DOC_NAME = 'RAMESH')


SELECT PAT_NAME, APP_DATE, REASON FROM APPOINTMENT JOIN PATIENT
WHERE PAT_ID IN (SELECT PAT_ID FROM PATIENT WHERE PAT_CITY = 'MYSORE')

SELECT APP_DATE, TIME1, REASON FROM  PATIENT P INNER JOIN APPOINTMENT A
ON A.PAT_ID = P.PAT_ID WHERE PAT_STATE = 'TN';
  
SELECT DOC_NAME FROM DOCTOR WHERE EMAILID IS NULL;

UPDATE DOCTOR 
SET EMAILID = 'UMA_123@gmail.com'
WHERE DOC_NAME = 'UMA';

SELECT DOC_NAME, APP_DATE, REASON FROM DOCTOR D INNER JOIN APPOINTMENT A 
ON D.DOC_ID  = A.DOC_ID WHERE SPECIALIZATION = 'ORTHO';


SELECT PAT_NAME FROM PATIENT 
WHERE PAT_CITY = (SELECT PAT_CITY FROM PATIENT WHERE PAT_NAME = 'HARISH')

SELECT DISTINCT REASON FROM APPOINTMENT;

SELECT DOC_NAME FROM DOCTOR WHERE EMAILID IS NULL AND SPECIALIZATION = 'ORTHO';

SELECT 

SELECT PAT_NAME, PAT_STATE, PAT_CITY FROM PATIENT P 
INNER JOIN APPOINTMENT A ON P.PAT_ID = A.PAT_ID
WHERE APP_DATE  = SYSDATE();

SELECT PAT_NAME, PAT_STATE, PAT_CITY FROM PATIENT 
WHERE PAT_ID IN (SELECT PAT_ID FROM APPOINTMENT WHERE APP_DATE = SYSDATE()

SELECT * FROM MANUFACTURERS

SELECT * FROM PRODUCT

SELECT M_NAME, P_NAME, P_PRICE FROM MANUFACTURERS M
INNER JOIN PRODUCT P ON M.M_CODE=P.M_CODE
WHERE P_PRICE IN (SELECT MAX(P_PRICE) FROM PRODUCT GROUP BY M_CODE)

SELECT M_NAME, P_NAME, P_PRICE FROM MANUFACTURERS M
INNER JOIN PRODUCT P ON M.M_CODE=P.M_CODE
WHERE P_PRICE IN (SELECT MAX(P_PRICE) FROM PRODUCT WHERE M.M_CODE=P.M_CODE)

SELECT M_NAME, P_NAME, P_PRICE FROM MANUFACTURERS M
INNER JOIN PRODUCT P ON M.M_CODE=P.M_CODE
WHERE P_PRICE = (SELECT MAX(P_PRICE) FROM PRODUCT WHERE M.M_CODE=PRODUCT.M_CODE)















